<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Food Express</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Hide scrollbar for horizontal sections */
    .snap-x::-webkit-scrollbar { display: none; }
    .snap-x {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    /* Overlay for modals/popups */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .overlay.active {
      display: flex;
      opacity: 1;
    }

    /* Cart bump animation */
    .animate-bump {
      transform: scale(1.08);
      transition: transform 0.18s;
    }
    .animate-bump-reset { transform: scale(1); }

    /* Fly-to-cart image animation */
    .fly-img {
      position: fixed;
      width: 64px;
      height: 64px;
      object-fit: cover;
      border-radius: 8px;
      pointer-events: none;
      z-index: 9999;
      will-change: transform, opacity;
      transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s ease;
    }

    /* Toast notifications */
    .toast-hidden { opacity: 0; transform: translateY(24px); }
    .toast-show {
      opacity: 1;
      transform: translateY(0);
      transition: all 400ms ease;
      will-change: transform, opacity;
    }

    /* Hero gradient background */
    .hero-gradient {
      background: linear-gradient(90deg, #FFEDD5 0%, #FFEDD5 40%, #FFF7ED 100%);
    }

    /* Small card hover effect */
    .ad-card {
      transition: transform 0.25s ease, box-shadow 0.25s ease;
    }
    .ad-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    }

   /* Slide animation helper */
.search-open #searchSheet {
  transform: translateY(0);
}

/* Slide-up animation */
#searchOverlay {
  transition: opacity 0.3s ease;
}
#searchSheet {
  transform: translateY(100%);
  transition: transform 0.35s ease;
}
#searchOverlay.active {
  display: flex !important;
  opacity: 1;
}
#searchOverlay.active #searchSheet {
  transform: translateY(0);
}



  </style>
</head>
<body class="bg-amber-50 font-sans text-gray-800">
  

<!-- Firebase SDKs (v11) kept as before -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { 
  getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged,
  createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut 
} from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  import { 
    getFirestore, doc, getDoc, setDoc, updateDoc, onSnapshot, collection, addDoc, serverTimestamp 
  } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCAGirQsFfQNInhUc9yuMD-QElaDnmRbKE",
    authDomain: "foodexpress-9b0ff.firebaseapp.com",
    projectId: "foodexpress-9b0ff",
    storageBucket: "foodexpress-9b0ff.appspot.com",
    messagingSenderId: "818281594225",
    appId: "1:818281594225:web:205774c2914ae2b9b08ad0"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

const provider = new GoogleAuthProvider();
window.__fe = { 
  auth, db, provider,
  onAuthStateChanged, createUserWithEmailAndPassword, 
  signInWithEmailAndPassword, signOut, signInWithPopup,
  doc, getDoc, setDoc, updateDoc, onSnapshot, 
  collection, addDoc, serverTimestamp 
};


// Trigger when user clicks Google Login
window.googleLogin = async function() {
  try {
    const result = await signInWithPopup(auth, provider);
    const user = result.user;

      // Optional: Log auth state
  onAuthStateChanged(auth, user => {
    console.log(user ? `Logged in: ${user.email}` : "User logged out");
  });

    // Save user data to Firestore
    const userRef = doc(db, "users", user.uid);
    await setDoc(userRef, {
      name: user.displayName,
      email: user.email,
      photo: user.photoURL,
      createdAt: serverTimestamp()
    }, { merge: true });

    alert("Welcome " + user.displayName + "!");
  } catch (error) {
    console.error("Google Sign-In Error:", error);
    alert("Login failed: " + error.message);
  }
};

</script>
<!-- Top bar -->
<!-- Header -->
<header class="p-4 bg-white shadow-sm sticky top-0 z-50">
  <div class="max-w-7xl mx-auto flex justify-center">
    <div class="relative w-full max-w-xl">
      <input
        type="text"
        placeholder="Search for food or restaurants..."
        class="w-full border border-gray-300 rounded-full px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-orange-500"
        id="searchBox"
      />
      <svg
        class="w-5 h-5 absolute left-3 top-2.5 text-gray-400"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z"
        />
      </svg>
    </div>
  </div>
  <span id="accountLabel" class="font-semibold text-gray-700"></span>
</header>

<!-- üîç Full-Screen Search Overlay -->
<div id="searchOverlay" class="hidden fixed inset-0 bg-white z-50 flex flex-col translate-y-full transition-transform duration-300 ease-out">
  <!-- Top bar -->
  <div class="flex items-center justify-between px-4 py-3 border-b">
    <input id="searchInput" type="text" placeholder="Search for dishes or restaurants"
      class="flex-1 bg-gray-100 rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-orange-500 text-gray-700" />
    <button id="closeSearch" class="ml-3 text-gray-500 hover:text-black text-xl">‚úï</button>
  </div>

  <!-- Content -->
  <div class="p-4 flex-1 overflow-y-auto">
    <h3 class="text-gray-700 font-semibold mb-3">Recent Searches</h3>
    <ul id="recentList" class="space-y-2 mb-5"></ul>

    <h3 class="text-gray-700 font-semibold mb-3">Popular</h3>
    <div id="popularList" class="flex flex-wrap gap-2">
      <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm cursor-pointer hover:bg-orange-100">Biryani</span>
      <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm cursor-pointer hover:bg-orange-100">Pizza</span>
      <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm cursor-pointer hover:bg-orange-100">Burger</span>
      <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm cursor-pointer hover:bg-orange-100">Pasta</span>
      <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm cursor-pointer hover:bg-orange-100">Coffee</span>
    </div>
  </div>
</div>




<!-- Hero + Main promos -->
<main class="max-w-5xl mx-auto px-4 py-6">
  <section class="hero-gradient rounded-xl p-5 flex flex-col md:flex-row gap-4 items-center">
    <div class="flex-1">
      <h1 class="text-2xl sm:text-3xl font-extrabold tracking-tight">Hot Deals Today ‚Äî Up to <span class="text-orange-600">50% OFF</span></h1>
      <p class="text-sm text-gray-600 mt-2">Free delivery on orders above ‚Çπ199. Exclusive combos & limited-time coupons. Use code <span class="font-semibold">FE50</span></p>

      <div class="mt-4 flex gap-3">
        <button onclick="scrollToSection('top-picks')" class="bg-orange-500 text-white px-4 py-2 rounded-full shadow">Order Now</button>
        <button onclick="scrollToSection('offers')" class="bg-white border border-gray-200 px-4 py-2 rounded-full">View Offers</button>
      </div>

      <div class="mt-4 grid grid-cols-2 sm:grid-cols-4 gap-3">
        <div class="bg-white p-3 rounded-lg flex items-center gap-3 shadow-sm ad-card">
          <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 3h18v4H3zM5 7v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <div>
            <div class="text-sm font-semibold">Free Delivery</div>
            <div class="text-xs text-gray-500">On orders ‚Çπ199+</div>
          </div>
        </div>

        <div class="bg-white p-3 rounded-lg flex items-center gap-3 shadow-sm ad-card">
          <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2v6" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M5 11h14" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 22v-6" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <div>
            <div class="text-sm font-semibold">Combo Offers</div>
            <div class="text-xs text-gray-500">Save up to 30%</div>
          </div>
        </div>

        <div class="bg-white p-3 rounded-lg flex items-center gap-3 shadow-sm ad-card">
          <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2a10 10 0 1 0 0 20" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 6v6l4 2" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <div>
            <div class="text-sm font-semibold">Quick Delivery</div>
            <div class="text-xs text-gray-500">Average 30‚Äì40 min</div>
          </div>
        </div>

        <div class="bg-white p-3 rounded-lg flex items-center gap-3 shadow-sm ad-card">
          <svg class="w-7 h-7" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M12 2l2 6h6l-5 4 2 6-5-4-5 4 2-6L4 8h6z" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <div>
            <div class="text-sm font-semibold">Earn Points</div>
            <div class="text-xs text-gray-500">Rewards & cashback</div>
          </div>
        </div>
      </div>

    </div>

    <div class="w-full md:w-80">
      <img src="https://i.postimg.cc/1tyQKPD9/promo.jpg" alt="promo" class="rounded-xl shadow-lg w-full object-cover h-48" />
    </div>
  </section>
  <!-- Promo strip carousel -->
  <section class="mt-6">
    <div class="overflow-x-auto snap-x snap-mandatory scroll-smooth px-1 py-2">
      <div class="flex gap-3 w-max" id="promoInner">
        <img src="https://i.imgur.com/MH2a8rD.jpg" class="h-[140px] w-[420px] rounded-lg flex-shrink-0 object-cover" />
        <img src="https://i.imgur.com/q8Aaw0m.jpg" class="h-[140px] w-[420px] rounded-lg flex-shrink-0 object-cover" />
        <img src="https://i.postimg.cc/1tyQKPD9/promo.jpg" class="h-[140px] w-[420px] rounded-lg flex-shrink-0 object-cover" />
        <img src="https://i.imgur.com/0y8Ftya.jpg" class="h-[140px] w-[420px] rounded-lg flex-shrink-0 object-cover" />
      </div>
    </div>
  </section>

  <!-- Categories -->
  <section class="mt-6">
    <h2 class="text-lg font-bold mb-3">Categories</h2>
    <div class="flex overflow-x-auto space-x-3 p-1">
      <!-- icon + label cards -->
      <div class="bg-white rounded-xl px-4 py-3 shadow-sm flex items-center gap-3 min-w-[120px]">
        <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center">üçî</div>
        <div>
          <div class="text-sm font-semibold">Burger</div>
          <div class="text-xs text-gray-500">120 places</div>
        </div>
      </div>

      <div class="bg-white rounded-xl px-4 py-3 shadow-sm flex items-center gap-3 min-w-[120px]">
        <div class="w-10 h-10 rounded-full bg-yellow-100 flex items-center justify-center">üçï</div>
        <div>
          <div class="text-sm font-semibold">Pizza</div>
          <div class="text-xs text-gray-500">95 places</div>
        </div>
      </div>

      <div class="bg-white rounded-xl px-4 py-3 shadow-sm flex items-center gap-3 min-w-[120px]">
        <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">ü•ó</div>
        <div>
          <div class="text-sm font-semibold">Salads</div>
          <div class="text-xs text-gray-500">60 places</div>
        </div>
      </div>

      <div class="bg-white rounded-xl px-4 py-3 shadow-sm flex items-center gap-3 min-w-[120px]">
        <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">üç£</div>
        <div>
          <div class="text-sm font-semibold">Sushi</div>
          <div class="text-xs text-gray-500">22 places</div>
        </div>
      </div>

      <div class="bg-white rounded-xl px-4 py-3 shadow-sm flex items-center gap-3 min-w-[120px]">
        <div class="w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center">üåÆ</div>
        <div>
          <div class="text-sm font-semibold">Tacos</div>
          <div class="text-xs text-gray-500">34 places</div>
        </div>
      </div>

      <div class="bg-white rounded-xl px-4 py-3 shadow-sm flex items-center gap-3 min-w-[120px]">
        <div class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center">üçõ</div>
        <div>
          <div class="text-sm font-semibold">Biryani</div>
          <div class="text-xs text-gray-500">48 places</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Top picks -->
  <section id="top-picks" class="mt-6">
    <h2 class="text-lg font-bold mb-3">Top picks</h2>
    <div class="flex overflow-x-auto space-x-4 pb-6">
      <!-- repeat several cards (static sample data) -->
      <div class="w-64 bg-white shadow rounded-xl p-3 flex-shrink-0 card">
        <img src="https://i.imgur.com/0y8Ftya.jpg" class="w-full h-36 object-cover rounded-lg product-image" />
        <h3 class="mt-2 font-bold">Cheese Burger</h3>
        <p class="text-gray-500 text-sm">Burger Haven ‚Ä¢ 31 min ‚Ä¢ 4.8‚òÖ</p>
        <p class="text-orange-600 font-bold mt-1">‚Çπ89</p>
        <div class="mt-2 flex gap-2">
          <button onclick="handleAddToCart(this, 'Cheese Burger', 89, 'https://i.imgur.com/0y8Ftya.jpg')" class="bg-orange-500 text-white rounded-full w-full py-1">Add</button>
          <button class="bg-gray-100 rounded-full px-3">+Fav</button>
        </div>
      </div>

      <div class="w-64 bg-white shadow rounded-xl p-3 flex-shrink-0 card">
        <img src="https://i.imgur.com/nQF2zWb.jpg" class="w-full h-36 object-cover rounded-lg product-image" />
        <h3 class="mt-2 font-bold">BBQ Bacon Burger</h3>
        <p class="text-gray-500 text-sm">Burger Haven ‚Ä¢ 27 min ‚Ä¢ 4.6‚òÖ</p>
        <p class="text-orange-600 font-bold mt-1">‚Çπ99</p>
        <div class="mt-2 flex gap-2">
          <button onclick="handleAddToCart(this, 'BBQ Bacon Burger', 99, 'https://i.imgur.com/nQF2zWb.jpg')" class="bg-orange-500 text-white rounded-full w-full py-1">Add</button>
          <button class="bg-gray-100 rounded-full px-3">+Fav</button>
        </div>
      </div>

      <div class="w-64 bg-white shadow rounded-xl p-3 flex-shrink-0 card">
        <img src="https://i.imgur.com/0aKQ3kD.jpg" class="w-full h-36 object-cover rounded-lg product-image" />
        <h3 class="mt-2 font-bold">Margherita Pizza</h3>
        <p class="text-gray-500 text-sm">Pizza Palace ‚Ä¢ 25 min ‚Ä¢ 4.7‚òÖ</p>
        <p class="text-orange-600 font-bold mt-1">‚Çπ249</p>
        <div class="mt-2 flex gap-2">
          <button onclick="handleAddToCart(this, 'Margherita Pizza', 249, 'https://i.imgur.com/0aKQ3kD.jpg')" class="bg-orange-500 text-white rounded-full w-full py-1">Add</button>
          <button class="bg-gray-100 rounded-full px-3">+Fav</button>
        </div>
      </div>

      <div class="w-64 bg-white shadow rounded-xl p-3 flex-shrink-0 card">
        <img src="https://i.imgur.com/1fYx9Kj.jpg" class="w-full h-36 object-cover rounded-lg product-image" />
        <h3 class="mt-2 font-bold">Veg Biryani</h3>
        <p class="text-gray-500 text-sm">Biryani House ‚Ä¢ 35 min ‚Ä¢ 4.5‚òÖ</p>
        <p class="text-orange-600 font-bold mt-1">‚Çπ129</p>
        <div class="mt-2 flex gap-2">
          <button onclick="handleAddToCart(this, 'Veg Biryani', 129, 'https://i.imgur.com/1fYx9Kj.jpg')" class="bg-orange-500 text-white rounded-full w-full py-1">Add</button>
          <button class="bg-gray-100 rounded-full px-3">+Fav</button>
        </div>
      </div>

    </div>
  </section>

  <!-- Offers grid (ads) -->
  <section id="offers" class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
    <div class="col-span-2 bg-white rounded-xl p-4 shadow">
      <h3 class="font-bold mb-2">Limited Time Offers</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
        <div class="p-3 rounded-lg bg-gradient-to-r from-orange-50 to-white flex items-center gap-3">
          <img src="https://i.imgur.com/0y8Ftya.jpg" class="w-20 h-16 object-cover rounded" />
          <div>
            <div class="font-semibold">Buy 1 Get 1 Free</div>
            <div class="text-sm text-gray-600">Only at Burger Haven</div>
          </div>
        </div>

        <div class="p-3 rounded-lg bg-gradient-to-r from-yellow-50 to-white flex items-center gap-3">
          <img src="https://i.imgur.com/0aKQ3kD.jpg" class="w-20 h-16 object-cover rounded" />
          <div>
            <div class="font-semibold">Pizza Combo ‚Äî Save ‚Çπ99</div>
            <div class="text-sm text-gray-600">Use code PIZZA99</div>
          </div>
        </div>

        <div class="p-3 rounded-lg bg-gradient-to-r from-green-50 to-white flex items-center gap-3">
          <img src="https://i.imgur.com/1fYx9Kj.jpg" class="w-20 h-16 object-cover rounded" />
          <div>
            <div class="font-semibold">Family Biryani Pack</div>
            <div class="text-sm text-gray-600">Feeds 4+ ‚Äî Free raita</div>
          </div>
        </div>

        <div class="p-3 rounded-lg bg-gradient-to-r from-blue-50 to-white flex items-center gap-3">
          <img src="https://i.imgur.com/nQF2zWb.jpg" class="w-20 h-16 object-cover rounded" />
          <div>
            <div class="font-semibold">BBQ Feast</div>
            <div class="text-sm text-gray-600">Up to 25% off</div>
          </div>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-xl p-4 shadow">
      <h3 class="font-bold mb-2">Sponsored</h3>
      <img src="https://i.imgur.com/3yKq9vG.jpg" class="w-full rounded-lg object-cover h-40" />
    </div>
  </section>

  <!-- Recommended for you -->
  <section class="mt-6">
    <h2 class="text-lg font-bold mb-3">Recommended for you</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
      <!-- static grid cards -->
      <div class="bg-white rounded-xl p-3 shadow">
        <img src="https://i.imgur.com/0y8Ftya.jpg" class="w-full h-36 object-cover rounded-lg" />
        <div class="mt-2 flex justify-between items-start">
          <div>
            <div class="font-semibold">Cheese Burger</div>
            <div class="text-xs text-gray-500">Burger Haven ‚Ä¢ 4.8‚òÖ</div>
          </div>
          <div class="text-orange-600 font-bold">‚Çπ89</div>
        </div>
        <div class="mt-3 flex gap-2">
          <button onclick="handleAddToCart(this, 'Cheese Burger', 89, 'https://i.imgur.com/0y8Ftya.jpg')" class="bg-orange-500 text-white rounded-full w-full py-1">Add</button>
        </div>
      </div>

      <div class="bg-white rounded-xl p-3 shadow">
        <img src="https://i.imgur.com/0aKQ3kD.jpg" class="w-full h-36 object-cover rounded-lg" />
        <div class="mt-2 flex justify-between items-start">
          <div>
            <div class="font-semibold">Margherita Pizza</div>
            <div class="text-xs text-gray-500">Pizza Palace ‚Ä¢ 4.7‚òÖ</div>
          </div>
          <div class="text-orange-600 font-bold">‚Çπ249</div>
        </div>
        <div class="mt-3 flex gap-2">
          <button onclick="handleAddToCart(this, 'Margherita Pizza', 249, 'https://i.imgur.com/0aKQ3kD.jpg')" class="bg-orange-500 text-white rounded-full w-full py-1">Add</button>
        </div>
      </div>

      <div class="bg-white rounded-xl p-3 shadow">
        <img src="https://i.imgur.com/1fYx9Kj.jpg" class="w-full h-36 object-cover rounded-lg" />
        <div class="mt-2 flex justify-between items-start">
          <div>
            <div class="font-semibold">Veg Biryani</div>
            <div class="text-xs text-gray-500">Biryani House ‚Ä¢ 4.5‚òÖ</div>
          </div>
          <div class="text-orange-600 font-bold">‚Çπ129</div>
        </div>
        <div class="mt-3 flex gap-2">
          <button onclick="handleAddToCart(this, 'Veg Biryani', 129, 'https://i.imgur.com/1fYx9Kj.jpg')" class="bg-orange-500 text-white rounded-full w-full py-1">Add</button>
        </div>
      </div>

    </div>
  </section>

</main>

<!-- Bottom Navigation (mobile) -->
<nav class="fixed bottom-4 left-0 right-0 flex justify-center z-50">
  <div class="w-11/12 bg-white rounded-2xl shadow-lg p-2 flex justify-around items-center">

    <!-- Home -->
    <div class="nav-item flex flex-col items-center cursor-pointer text-orange-500" id="navHome" onclick="setActiveTab('home')">
      <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 9l9-6 9 6v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      <div class="text-xs">Home</div>
    </div>

    <!-- Orders -->
    <div class="nav-item flex flex-col items-center cursor-pointer text-gray-500" id="navOrders" onclick="setActiveTab('orders'); goToOrders()">
      <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M3 3h18v4H3zM5 7v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      <div class="text-xs">Orders</div>
    </div>

    <!-- Cart -->
    <div class="nav-item flex flex-col items-center cursor-pointer text-gray-500" id="navCart" onclick="setActiveTab('cart'); goToCart()">
      <div id="cartIcon" class="relative">
        <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path d="M6 6h15l-1.5 9h-12z" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" />
          <circle cx="9" cy="20" r="1" />
          <circle cx="19" cy="20" r="1" />
        </svg>
        <span id="cartCount" class="absolute -top-1 -right-2 bg-orange-500 text-white text-xs w-5 h-5 flex items-center justify-center rounded-full">0</span>
      </div>
      <div class="text-xs">Cart</div>
    </div>

    <!-- Account -->
    <div class="nav-item flex flex-col items-center cursor-pointer text-gray-500" id="navAccount" onclick="setActiveTab('account'); openLoginPopup()">
      <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10z" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M4 20a8 8 0 0 1 16 0" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      <div class="text-xs">Account</div>
    </div>

  </div>
</nav>


<!-- Login/Signup Popup (kept) -->
<div id="loginPopup" class="overlay">
  <div class="bg-white p-6 rounded-lg w-80">
    <h2 class="text-lg font-bold mb-4" id="popupTitle">Login</h2>
    <input type="text" id="nameField" placeholder="Name" class="border p-2 w-full mb-2 hidden" />
    <input type="email" id="emailField" placeholder="Email" class="border p-2 w-full mb-2" />
    <div class="relative mb-2">
      <input type="password" id="passwordField" placeholder="Password" class="border p-2 w-full" />
      <button type="button" onclick="togglePassword('passwordField', this)" class="absolute right-2 top-2 text-gray-500">Show</button>
    </div>
    <div class="relative mb-4 hidden" id="confirmPasswordContainer">
      <input type="password" id="confirmPasswordField" placeholder="Confirm Password" class="border p-2 w-full" />
    </div>

    <p id="errorText" class="text-red-500 text-sm mb-2 hidden"></p>

    <!-- Submit Button -->
    <button onclick="submitAuth()" class="bg-orange-500 text-white py-2 px-4 w-full rounded">Submit</button>
        <!-- üëá Add Google Sign-in Button Here -->
    <div class="mt-5 border-t pt-4">
      <button onclick="googleLogin()" class="flex items-center justify-center w-full gap-2 border rounded-lg py-2 hover:bg-gray-50 transition">
        <img src="https://www.svgrepo.com/show/475656/google-color.svg" class="w-5 h-5" alt="Google icon">
        <span class="text-gray-700 font-medium">Sign in with Google</span>
      </button>
    </div>

    <p class="text-center text-sm mt-3 cursor-pointer text-blue-500" onclick="toggleAuthMode()" id="toggleText">Create account</p>
    <p class="text-center text-sm mt-3 cursor-pointer text-gray-500" onclick="closeLoginPopup()">Cancel</p>
  </div>  
</div>


<!-- Toast -->
<div id="toast" class="fixed bottom-20 left-1/2 transform -translate-x-1/2 bg-orange-500 text-white px-5 py-3 rounded-full shadow-lg toast-hidden z-50">Added to Cart ‚úÖ</div>

<!-- fly target -->
<div id="flyContainer"></div>

<script>
/* -----------------------
  Cart helpers (kept, same behavior)
------------------------*/
const LOCAL_CART_KEY = "fe_cart_v1";
let cart = JSON.parse(localStorage.getItem(LOCAL_CART_KEY) || "[]");
function persistLocalCart(){ localStorage.setItem(LOCAL_CART_KEY, JSON.stringify(cart)); }
function cartTotalQuantity(){ return cart.reduce((s,i) => s + (Number(i.quantity)||0), 0); }
function cartTotalAmount(){ return cart.reduce((s,i) => s + (Number(i.price)||0) * (Number(i.quantity)||0), 0); }
function updateCartBadge(){ document.getElementById("cartCount").innerText = cartTotalQuantity(); persistLocalCart(); }
updateCartBadge();


// Highlight active bottom nav tab
function setActiveTab(tab) {
  document.querySelectorAll('.nav-item').forEach(item => {
    item.classList.remove('text-orange-500');
    item.classList.add('text-gray-500');
  });

  const active = document.getElementById(`nav${tab.charAt(0).toUpperCase() + tab.slice(1)}`);
  if (active) {
    active.classList.add('text-orange-500');
    active.classList.remove('text-gray-500');
  }
}


document.addEventListener("DOMContentLoaded", () => {
  if (window.location.pathname.includes("orders")) setActiveTab("orders");
  else if (window.location.pathname.includes("cart")) setActiveTab("cart");
  else if (window.location.pathname.includes("account")) setActiveTab("account");
  else setActiveTab("home");
});


/* -----------------------
  Toast
------------------------*/
let toastQueue = [], toastShowing = false;
function showToast(msg){
  const toast = document.getElementById("toast");
  toastQueue.push(msg);
  if(toastShowing) return;
  toastShowing = true;
  const next = () => {
    if(!toastQueue.length){ toastShowing=false; return; }
    const m = toastQueue.shift();
    toast.innerText = m;
    toast.classList.remove("toast-hidden");
    toast.classList.add("toast-show");
    setTimeout(()=>{ toast.classList.remove("toast-show"); toast.classList.add("toast-hidden"); setTimeout(next, 450); },1500);
  };
  next();
}

/* -----------------------
  Fly-to-cart animation (curved motion)
------------------------*/
function flyToCart(imageEl){
  if(!imageEl) return;
  const imgRect = imageEl.getBoundingClientRect();
  const cartIcon = document.getElementById("cartIcon");

  const clone = imageEl.cloneNode(true);
  clone.classList.add("fly-img");
  clone.style.left = imgRect.left + "px";
  clone.style.top = imgRect.top + "px";
  clone.style.width = imgRect.width + "px";
  clone.style.height = imgRect.height + "px";
  clone.style.opacity = "1";
  clone.style.zIndex = 10000 + Date.now();
  document.body.appendChild(clone);

  const startX = imgRect.left;
  const startY = imgRect.top;
  const endX = cartIcon.getBoundingClientRect().left;
  const endY = cartIcon.getBoundingClientRect().top;
  const dx = endX - startX;
  const dy = endY - startY;
  const peak = -Math.min(150, dy - 50);

  let progress = 0, duration = 800, fps = 60, interval = 1000/fps;

  function animate(){
    progress += interval;
    const t = Math.min(progress/duration,1);
    const x = (1-t)*(1-t)*startX + 2*(1-t)*t*(startX+dx/2) + t*t*endX;
    const y = (1-t)*(1-t)*startY + 2*(1-t)*t*(startY+peak) + t*t*endY;
    clone.style.transform = `translate(${x-startX}px, ${y-startY}px) scale(${1-0.7*t})`;
    clone.style.opacity = 1 - 0.5*t;
    if(t<1) requestAnimationFrame(animate);
    else {
      const cartEl = cartIcon.querySelector("span:first-child") || cartIcon;
      cartEl.animate([{transform:"scale(1)"},{transform:"scale(1.15)"},{transform:"scale(1)"}],{duration:260,easing:"ease-out"});
      clone.remove();
    }
  }
  animate();
}

/* -----------------------
  Add to cart
------------------------*/
function handleAddToCart(button,name,price,imageUrl){
  const card = button.closest(".card") || button.closest(".bg-white");
  const imageEl = card ? card.querySelector(".product-image, img") : null;
  if(imageEl) flyToCart(imageEl);
  if(button) { button.classList.add("animate-bump"); setTimeout(()=>button.classList.remove("animate-bump"),260); }

  const existingIndex = cart.findIndex(i => i.name===name && String(i.price)===String(price));
  if(existingIndex>=0) cart[existingIndex].quantity=(Number(cart[existingIndex].quantity)||0)+1;
  else cart.push({name,price:Number(price),quantity:1,image:imageUrl||""});
  updateCartBadge();
  showToast(`${name} added ‚úÖ`);
  saveUserCart();
}

/* -----------------------
  Save cart to Firestore if logged in
------------------------*/
async function saveUserCart(){
  try{
    const { auth, db, doc, setDoc } = window.__fe;
    const user = auth.currentUser;
    if(!user){ persistLocalCart(); return; }
    const userRef = doc(db,"users",user.uid);
    await setDoc(userRef,{cart},{merge:true});
  }catch(err){ console.error("saveUserCart error:",err); }
}

/* -----------------------
  Auth helpers
------------------------*/
let authMode="login";
function openLoginPopup(){ const { auth } = window.__fe; if(auth.currentUser){ window.location.href="account.html"; return; } document.getElementById("loginPopup").style.display="flex"; }
function closeLoginPopup(){ document.getElementById("loginPopup").style.display="none"; }
function toggleAuthMode(){ authMode = authMode==="login"?"signup":"login"; document.getElementById("popupTitle").innerText = authMode==="login"?"Login":"Sign Up"; document.getElementById("toggleText").innerText = authMode==="login"?"Create account":"Already have account?"; document.getElementById("nameField").classList.toggle("hidden"); document.getElementById("confirmPasswordContainer").classList.toggle("hidden"); }
function togglePassword(id,btn){ const f = document.getElementById(id); f.type = f.type==="password"?"text":"password"; }

/* -----------------------
  Submit auth
------------------------*/
async function submitAuth(){
  const { auth, createUserWithEmailAndPassword, signInWithEmailAndPassword } = window.__fe;
  const email = document.getElementById("emailField").value;
  const password = document.getElementById("passwordField").value;
  const name = document.getElementById("nameField").value;
  const errorEl = document.getElementById("errorText");
  errorEl.classList.add("hidden");

  if(authMode==="signup"){
    try{
      await createUserWithEmailAndPassword(auth,email,password);
      closeLoginPopup();
      showToast("Account created üéâ");
    }catch(err){ errorEl.innerText=err.message; errorEl.classList.remove("hidden"); }
  }else{
    try{
      await signInWithEmailAndPassword(auth,email,password);
      closeLoginPopup();
      showToast("Logged in ‚úÖ");
    }catch(err){ errorEl.innerText=err.message; errorEl.classList.remove("hidden"); }
  }
}

/* -----------------------
  On auth change
------------------------*/
const { auth } = window.__fe;
onAuthStateChanged(auth, (user) => {
  if(user){
    document.getElementById("accountLabel").innerHTML = `<img src="${user.photoURL}" class="w-6 h-6 rounded-full inline mr-1"/> ${user.displayName || user.email}`;
  } else {
    document.getElementById("accountLabel").innerText = "Account";
  }
});


/* -----------------------
  Navigation helpers
------------------------*/
function goToCart(){ window.location.href = "cart.html"; }
function goToOrders(){ window.location.href = "orders.html"; }
function scrollToSection(id){ const el = document.getElementById(id); if(el) el.scrollIntoView({behavior:'smooth', block:'start'}); }

/* -----------------------
  Promo auto-scroll
------------------------*/
setInterval(()=>{
  const container = document.getElementById("promoInner");
  if(container) container.scrollBy({left:420,behavior:"smooth"});
},3500);

/* -----------------------
  Update location dynamically
------------------------*/
async function updateLocation() {
  const locationText = document.getElementById("locationText");

  // Check if user has already allowed location
  const storedLocation = localStorage.getItem("fe_user_location");
  if (storedLocation) {
    locationText.innerText = storedLocation;
    return;
  }

  // Check if browser supports geolocation
  if (!navigator.geolocation) {
    locationText.innerText = "Location unavailable";
    return;
  }

  // Ask for location
  navigator.geolocation.getCurrentPosition(
    async (position) => {
      const { latitude, longitude } = position.coords;

      try {
        const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`);
        const data = await res.json();

        let displayLocation = "";
        if (data.address.city) displayLocation = data.address.city;
        else if (data.address.town) displayLocation = data.address.town;
        else if (data.address.village) displayLocation = data.address.village;
        else displayLocation = data.display_name.split(",")[0];

        locationText.innerText = displayLocation;
        // Save to localStorage so we don't ask again
        localStorage.setItem("fe_user_location", displayLocation);
      } catch (err) {
        console.error(err);
        locationText.innerText = "Location unavailable";
      }
    },
    (err) => {
      console.warn("User denied location or error:", err);
      locationText.innerText = "Location unavailable";
    }
  );
}

// Run on page load
updateLocation();

    function startLiveLocation() {
      const locationText = document.getElementById("locationText");

      // Check if user has already allowed location (localStorage)
      const storedLocation = localStorage.getItem("fe_user_location");
      if (storedLocation) {
        locationText.innerText = storedLocation;
        return;
      }

      if (!navigator.geolocation) {
        locationText.innerText = "Location unavailable";
        return;
      }

      // Watch the user's location
      const watchId = navigator.geolocation.watchPosition(
        async (position) => {
          const { latitude, longitude } = position.coords;

          try {
            const res = await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${latitude}&lon=${longitude}`);
            const data = await res.json();

            let displayLocation = "";
            if (data.address.city) displayLocation = data.address.city;
            else if (data.address.town) displayLocation = data.address.town;
            else if (data.address.village) displayLocation = data.address.village;
            else displayLocation = data.display_name.split(",")[0];

            locationText.innerText = displayLocation;

            // Save to localStorage so we don't ask again
            localStorage.setItem("fe_user_location", displayLocation);
          } catch (err) {
            console.error(err);
            locationText.innerText = "Location unavailable";
          }
        },
        (err) => {
          console.warn("User denied location or error:", err);
          locationText.innerText = "Location unavailable";
        },
        { enableHighAccuracy: true, maximumAge: 0, timeout: 10000 }
      );
    }

    // Start live location tracking on page load
    startLiveLocation();



</script>
<script>
  // Detect user login state
  firebase.auth().onAuthStateChanged((user) => {
    if (user) {
      // If logged in, save details in Firestore (optional)
      const db = firebase.firestore();
      db.collection("users").doc(user.uid).set({
        name: user.displayName || "User",
        email: user.email || "",
        phone: user.phoneNumber || "",
        uid: user.uid,
        lastLogin: new Date().toISOString(),
      }, { merge: true });

      // ‚úÖ Redirect after login
      window.location.href = "/home.html"; // Change this to your destination page
    } else {
      console.log("No user logged in");
    }
  });
</script>
<script>
document.addEventListener("DOMContentLoaded", async () => {
  const locationText = document.getElementById("locationText");

  // 1Ô∏è‚É£ If location already saved in localStorage ‚Üí load immediately
  const savedLocation = localStorage.getItem("fe_user_location");
  if (savedLocation) {
    locationText.textContent = savedLocation;
    return;
  }

  // 2Ô∏è‚É£ If not saved ‚Üí ask for permission and fetch it
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(async (position) => {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      try {
        // Use reverse geocoding to get readable city name
        const res = await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`);
        const data = await res.json();

        const city = data.city || data.locality || data.principalSubdivision || "Unknown location";
        locationText.textContent = city;

        // 3Ô∏è‚É£ Store for future sessions
        localStorage.setItem("fe_user_location", city);
      } catch (err) {
        console.error("Location fetch failed:", err);
        locationText.textContent = "Location unavailable";
      }
    }, () => {
      locationText.textContent = "Location access denied";
    });
  } else {
    locationText.textContent = "Geolocation not supported";
  }
});
</script>
<script>

/* -----------------------
   Swiggy/Zomato-Style Search Overlay
------------------------*/
const searchBox = document.getElementById("searchBox");
const searchOverlay = document.getElementById("searchOverlay");
const searchInput = document.getElementById("searchInput");
const closeSearch = document.getElementById("closeSearch");
const recentList = document.getElementById("recentList");
const popularList = document.getElementById("popularList");

let recentSearches = JSON.parse(localStorage.getItem("fe_recent") || "[]");
renderRecent();

// üîπ Open overlay
searchBox.addEventListener("focus", openSearchOverlay);
searchBox.addEventListener("click", openSearchOverlay);

function openSearchOverlay() {
  searchOverlay.classList.remove("hidden");
  requestAnimationFrame(() => searchOverlay.classList.remove("translate-y-full"));
  setTimeout(() => searchInput.focus(), 350);
}

// üîπ Close overlay
closeSearch.addEventListener("click", closeSearchOverlay);
function closeSearchOverlay() {
  searchOverlay.classList.add("translate-y-full");
  setTimeout(() => searchOverlay.classList.add("hidden"), 300);
}

// üîπ Save on Enter
searchInput.addEventListener("keydown", e => {
  if (e.key === "Enter") {
    const term = searchInput.value.trim();
    if (!term) return;
    addRecent(term);
    closeSearchOverlay();
    showToast(`Searching for "${term}"...`);
  }
});

// üîπ Add a recent term
function addRecent(term) {
  recentSearches = [term, ...recentSearches.filter(x => x !== term)].slice(0, 6);
  localStorage.setItem("fe_recent", JSON.stringify(recentSearches));
  renderRecent();
}

// üîπ Render recent searches
function renderRecent() {
  recentList.innerHTML = recentSearches.length
    ? recentSearches
        .map(
          i => `
      <li class="px-4 py-2 bg-gray-100 rounded-lg flex justify-between items-center hover:bg-gray-200 cursor-pointer">
        <span onclick="useSearch('${i}')">${i}</span>
        <button class="text-gray-400 hover:text-red-500 text-sm" onclick="removeSearch('${i}')">‚úï</button>
      </li>`
        )
        .join("")
    : `<li class="text-gray-400 text-sm text-center py-6">No recent searches yet</li>`;
}

window.useSearch = term => {
  searchBox.value = term;
  closeSearchOverlay();
  showToast(`Searching for "${term}"...`);
};

window.removeSearch = term => {
  recentSearches = recentSearches.filter(x => x !== term);
  localStorage.setItem("fe_recent", JSON.stringify(recentSearches));
  renderRecent();
};

// üîπ Popular tag click
popularList.querySelectorAll("span").forEach(tag => {
  tag.addEventListener("click", () => {
    const term = tag.textContent.trim();
    addRecent(term);
    closeSearchOverlay();
    showToast(`Searching for "${term}"...`);
  });
});



</script>





</body>
</html>
