<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Food Express</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Hide scrollbar for horizontal sections */
    .snap-x::-webkit-scrollbar { display: none; }
    .snap-x {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    /* Overlay for modals/popups */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .overlay.active {
      display: flex;
      opacity: 1;
    }

    /* Cart bump animation */
    .animate-bump {
      transform: scale(1.08);
      transition: transform 0.18s;
    }
    .animate-bump-reset { transform: scale(1); }

    /* Fly-to-cart image animation */
    .fly-img {
      position: fixed;
      width: 64px;
      height: 64px;
      object-fit: cover;
      border-radius: 8px;
      pointer-events: none;
      z-index: 9999;
      will-change: transform, opacity;
      transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.3s ease;
    }

    /* Toast notifications */
    .toast-hidden { opacity: 0; transform: translateY(24px); }
    .toast-show {
      opacity: 1;
      transform: translateY(0);
      transition: all 400ms ease;
      will-change: transform, opacity;
    }

    /* Hero gradient background */
    .hero-gradient {
      background: linear-gradient(90deg, #FFEDD5 0%, #FFEDD5 40%, #FFF7ED 100%);
    }

    /* Small card hover effect */
    .ad-card {
      transition: transform 0.25s ease, box-shadow 0.25s ease;
    }
    .ad-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
    }

   /* Slide animation helper */
.search-open #searchSheet {
  transform: translateY(0);
}

/* Slide-up animation */
#searchOverlay {
  transition: opacity 0.3s ease;
}
#searchSheet {
  transform: translateY(100%);
  transition: transform 0.35s ease;
}
#searchOverlay.active {
  display: flex !important;
  opacity: 1;
}
#searchOverlay.active #searchSheet {
  transform: translateY(0);
}
/* Overlay + animation enhancements */
.fly-img { pointer-events: none; border-radius: 9999px; }
.animate-bump { transform: scale(1.1); transition: transform 0.25s ease; }

/* üî∂ Orange shimmer animation */
@keyframes shimmerMove {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}

.shimmer-box {
  background: linear-gradient(
    100deg,
    #fef3c7 20%,
    #fcd34d 40%,
    #fef3c7 60%
  );
  background-size: 200% 100%;
  animation: shimmerMove 1.2s infinite linear;
}

/* --- Modern Trending Cards --- */
.trending-card {
  background: white;
  border-radius: 1rem;
  transition: all 0.25s ease;
}
.trending-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 16px rgba(255, 102, 0, 0.15);
}

/* --- Add Button Gradient --- */
.add-btn {
  background: linear-gradient(90deg, #ff7e00, #ff4d00);
  color: #fff;
  font-weight: 600;
  border-radius: 9999px;
  font-size: 0.75rem;
  padding: 0.4rem 0.9rem;
  transition: 0.25s;
}
.add-btn:hover {
  filter: brightness(1.1);
}

/* --- Sticky Bottom Cart Bar --- */
#miniCartBar {
  position: fixed;
  bottom: -100px;
  left: 0;
  right: 0;
  background: #ff7e00;
  color: #fff;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.4rem;
  transition: all 0.3s ease;
  z-index: 80;
}
#miniCartBar.show {
  bottom: 0;
}
#miniCartBar button {
  background: white;
  color: #ff7e00;
  font-weight: 600;
  border-radius: 9999px;
  padding: 0.5rem 1.2rem;
}

nav.fixed.bottom-0 {
  transition: all 0.3s ease-in-out;


}

  .fade-slide-in {
    opacity: 0;
    transform: translateY(4px);
    animation: fadeSlide 0.4s ease-out forwards;
  }

  @keyframes fadeSlide {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Smooth appearing animation */
  .fade-slide-in {
    opacity: 0;
    transform: translateY(6px);
    animation: fadeSlide 0.4s ease-out forwards;
  }
  
  @keyframes fadeSlide {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }


   /* Glowing hover effect for suggestions */
  .suggestion {
    transition: all 0.2s ease-in-out;
  }
  .suggestion:hover, .suggestion.active {
    background-color: #FFEDD5; /* Light orange */
    box-shadow: 0 0 10px rgba(255,94,0,0.4);
    transform: scale(1.02);
  }

  /* Recent locations glow */
  .recent-location {
    transition: all 0.2s ease-in-out;
    background-color: #FFF4E6; /* Soft premium orange */
    font-weight: 600;
  }
  .recent-location:hover {
    box-shadow: 0 0 10px rgba(255,140,0,0.4);
    transform: scale(1.02);
  }
</style>





  </style>
</head>
<body class="bg-amber-50 font-sans text-gray-800">
  


</script>
<!-- Top bar -->
<!-- Header -->
<header class="p-4 bg-amber-50 sticky top-0 z-50">
  <div class="max-w-7xl mx-auto">

<!-- üìç Premium Swiggy-Style Location Row -->
<div class="flex items-center space-x-2 mb-2">

  <!-- Premium 3D Icon (Swiggy Style) -->
  <div class="p-2 rounded-full bg-white shadow-xl transform transition-all duration-300 hover:scale-110 hover:rotate-1">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
         class="w-6 h-6 text-orange-500 drop-shadow-[0_3px_3px_rgba(255,94,0,0.5)]">
      <path fill="currentColor"
            d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z"/>
    </svg>
  </div>

  <!-- Location Bubble -->
  <div id="locationButton"
       class="flex items-center space-x-1 px-3 py-1 bg-white rounded-2xl shadow-md cursor-pointer select-none
              transition-all duration-300 hover:shadow-xl hover:scale-[1.02] active:scale-95">
    <p id="locationText" class="font-semibold text-gray-900 text-sm tracking-wide">Detecting...</p>
    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-700"
         fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M19 9l-7 7-7-7" />
    </svg>
  </div>

</div>




    <!-- üîç 3D Search Bar -->
    <div class="relative w-full max-w-xl mx-auto
                bg-white rounded-full shadow-xl
                transform transition-all duration-300 hover:scale-[1.02] hover:shadow-2xl">

      <input
        type="text"
        placeholder="Search for food or restaurants..."
        class="w-full rounded-full px-4 py-3 pl-12 text-gray-700 focus:outline-none"
        id="searchBox"
      />

      <svg class="w-6 h-6 absolute left-4 top-3 text-gray-400"
        fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
      </svg>

    </div>

  </div>
</header>

<!-- Full-Screen Right Slide Panel -->
<div id="locationPanel" class="fixed top-0 right-0 w-full h-full bg-white z-50
                             transform translate-x-full transition-transform duration-500 ease-out overflow-y-auto">

  <div class="p-6 flex flex-col">

    <!-- Back Button -->
    <button onclick="closeLocationPanel()"
            class="flex items-center text-gray-700 font-semibold mb-4 active:scale-95">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 mr-2" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 19l-7-7 7-7" />
      </svg>
      Back
    </button>

    <h2 class="text-2xl font-extrabold mb-4">Change Location</h2>

    <!-- Current Location Button -->
    <button id="currentLocationBtn"
            class="w-full bg-orange-100 text-orange-700 py-3 rounded-xl font-semibold shadow mb-4
                   hover:bg-orange-200 active:scale-95">
      Use Current Location
    </button>

    <!-- Search Input -->
    <input type="text" id="newLocation"
           placeholder="Search or enter your location..."
           class="w-full px-4 py-3 border rounded-xl shadow-sm focus:ring-2 focus:ring-orange-500 mb-2" />

    <!-- Autocomplete Suggestions -->
    <div id="suggestions" class="flex flex-col gap-2 mb-4"></div>

    <!-- Recent Locations -->
    <div id="recentLocations" class="flex flex-col gap-2 text-sm text-gray-600 mb-4"></div>

  </div>
</div>

<div id="noData"></div>





<script>

// ELEMENTS
const locationButton = document.getElementById("locationButton");
const locationPanel = document.getElementById("locationPanel");
const locationText = document.getElementById("locationText");
const newLocationInput = document.getElementById("newLocation");
const currentLocationBtn = document.getElementById("currentLocationBtn");
const suggestionsContainer = document.getElementById("suggestions");
const recentContainer = document.getElementById("recentLocations");
const overlay = document.getElementById("overlay");
const noDataBox = document.getElementById("noData");

const RECENT_KEY = "recentLocations";


// ------------------------------------------------------
// üî• LOAD RECENT LOCATIONS
// ------------------------------------------------------
function loadRecentLocations() {
  const recent = JSON.parse(localStorage.getItem(RECENT_KEY) || "[]");
  recentContainer.innerHTML = "";

  if (recent.length === 0) return;

  const title = document.createElement("p");
  title.className = "font-semibold mb-2 text-orange-600";
  title.innerText = "Recent Locations";
  recentContainer.appendChild(title);

  recent.forEach((loc) => {
    const div = document.createElement("div");
    div.className =
      "px-3 py-2 bg-orange-50 rounded-lg cursor-pointer hover:bg-orange-100 font-semibold";
    div.innerText = loc;
    div.onclick = () => selectLocation(loc);
    recentContainer.appendChild(div);
  });
}


// ------------------------------------------------------
// üî• SAVE RECENT LOCATIONS
// ------------------------------------------------------
function addToRecent(location) {
  let recent = JSON.parse(localStorage.getItem(RECENT_KEY) || "[]");
  recent = recent.filter((l) => l !== location);
  recent.unshift(location);
  if (recent.length > 5) recent.pop();
  localStorage.setItem(RECENT_KEY, JSON.stringify(recent));
}


// ------------------------------------------------------
// üî• SELECT LOCATION
// ------------------------------------------------------
function selectLocation(loc) {
  const pureLocation = loc.split(",")[0];

  locationText.innerText = pureLocation;
  addToRecent(pureLocation);

  closeLocationPanel();

  updateRestaurantList(pureLocation);
}


function updateRestaurantList(selectedLocation) {
  const restaurants = window.restaurantData || [];

  // Make location clean
  const location = selectedLocation.toLowerCase().trim();

  // Filter restaurants for the exact location
  let filtered = restaurants.filter((r) =>
    r.city.toLowerCase() === location
  );

  // If strict match fails, try partial match
  if (filtered.length === 0) {
    filtered = restaurants.filter((r) =>
      r.city.toLowerCase().includes(location)
    );
  }

  // If still no results ‚Üí show "No service" (except for Koodankulam)
  if (filtered.length === 0 && location !== "koodankulam") {
    noDataBox.innerHTML = `
      <div class="text-center py-4">
        <h2 class="text-lg font-bold">Not Available in ${selectedLocation}</h2>
        <p class="text-sm mt-1">Food Express is coming soon to your area.</p>
        <p class="text-xs text-gray-500 mt-1">Showing restaurants from Koodankulam.</p>
      </div>
    `;

    // Show only Koodankulam restaurants, not all
    filtered = restaurants.filter((r) =>
      r.city.toLowerCase() === "koodankulam"
    );
  } else {
    noDataBox.innerHTML = "";
  }

  renderRestaurants(filtered);
}



// ------------------------------------------------------
// üî• LOCATION SEARCH (Nominatim + Recent)
// ------------------------------------------------------
newLocationInput.addEventListener("input", () => {
  const query = newLocationInput.value.trim();
  suggestionsContainer.innerHTML = "";

  if (query.length < 1) return;

  // Show recent matches first
  const recent = JSON.parse(localStorage.getItem(RECENT_KEY) || "[]");
  recent.forEach((loc) => {
    if (loc.toLowerCase().includes(query.toLowerCase())) {
      const div = document.createElement("div");
      div.className =
        "px-3 py-2 bg-orange-50 rounded-lg cursor-pointer hover:bg-orange-100 font-semibold";
      div.innerHTML = loc.replace(
        new RegExp(query, "gi"),
        (m) => `<span class='bg-yellow-200'>${m}</span>`
      );
      div.onclick = () => selectLocation(loc);
      suggestionsContainer.appendChild(div);
    }
  });

  // API search Tamil Nadu places
  fetch(
    `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(
      query
    )}&addressdetails=1&limit=10`
  )
    .then((res) => res.json())
    .then((data) => {
      const valid = data.filter((place) => {
        const state = place.address.state || "";
        const type = place.type || "";
        return (
          state.includes("Tamil Nadu") &&
          ["district", "city", "town", "village"].includes(type)
        );
      });

      valid.forEach((place) => {
        const div = document.createElement("div");
        div.className =
          "px-3 py-2 bg-gray-50 rounded-lg cursor-pointer hover:bg-orange-100 font-medium";
        div.innerHTML = place.display_name.replace(
          new RegExp(query, "gi"),
          (m) => `<span class='bg-yellow-200'>${m}</span>`
        );
        div.onclick = () => selectLocation(place.display_name);
        suggestionsContainer.appendChild(div);
      });

      if (recent.length === 0 && valid.length === 0) {
        const div = document.createElement("div");
        div.className =
          "px-3 py-2 bg-red-50 rounded-lg text-red-600 font-semibold";
        div.innerText = "No results found";
        suggestionsContainer.appendChild(div);
      }
    });
});


// ------------------------------------------------------
// üî• CURRENT LOCATION
// ------------------------------------------------------
function detectCurrentLocation() {
  if (!navigator.geolocation) {
    alert("GPS not supported.");
    return;
  }

  navigator.geolocation.getCurrentPosition(
    (pos) => {
      const { latitude, longitude } = pos.coords;

      fetch(
        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${latitude}&lon=${longitude}`
      )
        .then((res) => res.json())
        .then((data) => {
          const city =
            data.address.city ||
            data.address.town ||
            data.address.village ||
            data.display_name;

          selectLocation(city);
        });
    },
    () => alert("Location permission denied.")
  );
}


// ------------------------------------------------------
// üî• OPEN / CLOSE PANEL
// ------------------------------------------------------
locationButton.addEventListener("click", () => {
  locationPanel.style.transform = "translateX(0%)";
  overlay.style.opacity = "1";
  overlay.style.pointerEvents = "auto";
  loadRecentLocations();
});

function closeLocationPanel() {
  locationPanel.style.transform = "translateX(100%)";
  overlay.style.opacity = "0";
  overlay.style.pointerEvents = "none";
}

currentLocationBtn.addEventListener("click", detectCurrentLocation);


// ------------------------------------------------------
// ‚ö° AUTO DETECT LOCATION ON PAGE LOAD (IP + GPS)
// ------------------------------------------------------

// 1) Show saved location immediately
const savedAutoLocation = localStorage.getItem("user_location");
if (savedAutoLocation) {
  locationText.innerText = savedAutoLocation;
} else {
  locationText.innerText = "Detecting...";
}

// 2) Fallback (use if IP/GPS fail or outside Tamil Nadu)
function fallbackToKoodankulam() {
  const fallback = "Koodankulam";
  locationText.innerText = fallback;
  localStorage.setItem("user_location", fallback);
  updateRestaurantList(fallback);
}

// 2) Update location with strict Koodankulam rule
function setDetectedLocation(city, region) {
  let loc = city || "Koodankulam";

  // If outside Tamil Nadu ‚Üí fallback
  if (!region || region !== "Tamil Nadu") loc = "Koodankulam";

  // If location is Koodankulam ‚Üí normal
  if (loc.toLowerCase() === "koodankulam") {
    locationText.innerText = loc;
    localStorage.setItem("user_location", loc);
    updateRestaurantList(loc);
  } else {
    // Any other location ‚Üí show Not Available + Koodankulam restaurants
    locationText.innerText = loc;
    localStorage.setItem("user_location", loc);
    updateRestaurantList(loc); // your current updateRestaurantList() already handles fallback
  }
}

// 3) Detect using IP (super fast)
async function autoDetectIP() {
  try {
    const res = await fetch("https://ipapi.co/json/");
    const data = await res.json();
    const city = data.city;

    // If not Tamil Nadu ‚Üí use fallback
    if (!data.region || data.region !== "Tamil Nadu") {
      fallbackToKoodankulam();
      return;
    }

    if (city) {
      locationText.innerText = city;
      localStorage.setItem("user_location", city);
      updateRestaurantList(city);
    } else {
      fallbackToKoodankulam();
    }
  } catch (e) {
    fallbackToKoodankulam();
  }
}

// 3) GPS (0.5‚Äì1.5 sec, more accurate)
function autoDetectGPS() {
  if (!navigator.geolocation) return;

  navigator.geolocation.getCurrentPosition(
    (pos) => {
      fetch(
        `https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`
      )
        .then((r) => r.json())
        .then((data) => {
          const city =
            data.address.city ||
            data.address.town ||
            data.address.village ||
            data.display_name;

          locationText.innerText = city;
          localStorage.setItem("user_location", city);
          updateRestaurantList(city);
        });
    },
    (err) => {
      console.log("GPS blocked or slow");
    },
    {
      enableHighAccuracy: false,
      timeout: 1500,
      maximumAge: 300000,
    }
  );
}

window.addEventListener("load", () => {
  locationText.innerText = "Detecting...";

  // Try GPS first
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      (pos) => {
        fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${pos.coords.latitude}&lon=${pos.coords.longitude}`)
          .then(r => r.json())
          .then(data => {
            const city = data.address.city || data.address.town || data.address.village || "Koodankulam";
            const region = data.address.state || "Tamil Nadu";
            setDetectedLocation(city, region); // your existing function
          });
      },
      (err) => {
        console.log("GPS blocked or slow, fallback to IP");
        autoDetectIP(); // fallback if GPS fails
      },
      { enableHighAccuracy: true, timeout: 5000, maximumAge: 300000 }
    );
  } else {
    autoDetectIP(); // fallback if no GPS
  }
});





// ------------------------------------------------------
// üåü SAMPLE RESTAURANT DATA FOR KOODANKULAM
// ------------------------------------------------------
window.restaurantData = [
  {
    id: 1,
    name: "Koodankulam Tiffin Center",
    city: "Koodankulam",
    cuisine: "South Indian",
    rating: 4.5,
    deliveryTime: "30-40 mins",
  },
  {
    id: 2,
    name: "Seaside Veg Restaurant",
    city: "Koodankulam",
    cuisine: "Vegetarian",
    rating: 4.2,
    deliveryTime: "25-35 mins",
  },
  {
    id: 3,
    name: "Spice Villa",
    city: "Koodankulam",
    cuisine: "Indian, Chinese",
    rating: 4.7,
    deliveryTime: "35-45 mins",
  },
  {
    id: 4,
    name: "Ocean Breeze Cafe",
    city: "Koodankulam",
    cuisine: "Cafe, Beverages",
    rating: 4.3,
    deliveryTime: "20-30 mins",
  },
  {
    id: 5,
    name: "Coastal Biryani House",
    city: "Koodankulam",
    cuisine: "Biryani, North Indian",
    rating: 4.6,
    deliveryTime: "40-50 mins",
  },
];

// ------------------------------------------------------
// üåü RENDER FUNCTION
// ------------------------------------------------------
function renderRestaurants(restaurants) {
  const container = document.getElementById("restaurantList");
  if (!container) return;

  container.innerHTML = "";

  restaurants.forEach((r) => {
    const div = document.createElement("div");
    div.className =
      "p-4 mb-3 bg-white rounded-lg shadow-md hover:shadow-lg transition cursor-pointer";
    div.innerHTML = `
      <h3 class="font-bold text-lg">${r.name}</h3>
      <p class="text-sm text-gray-500">${r.cuisine}</p>
      <p class="text-sm text-gray-500">Rating: ${r.rating} ‚≠ê</p>
      <p class="text-sm text-gray-500">Delivery: ${r.deliveryTime}</p>
    `;
    container.appendChild(div);
  });
}


</script>








<!-- üîç Full-Screen Search Overlay -->
<div id="searchOverlay"
  class="hidden fixed inset-0 bg-white z-50 flex flex-col translate-y-full transition-transform duration-300 ease-out">

  <!-- Top bar -->
  <div class="flex items-center justify-between px-4 py-3 border-b">
    <input id="searchInput" type="text" placeholder="Search for dishes or restaurants"
      class="flex-1 bg-gray-100 rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-orange-500 text-gray-700" />
    <button id="closeSearch" class="ml-3 text-gray-500 hover:text-black text-xl">‚úï</button>
  </div>

  <!-- Results container (live search results appear here) -->
  <div id="resultsContainer" class="p-4 flex-1 overflow-y-auto"></div>
</div>

<!-- üßÅ Bottom Sheet Food Preview -->
<div id="foodSheet" class="hidden fixed inset-0 bg-black/40 backdrop-blur-sm z-[90] flex items-end">
  <div class="bg-white w-full rounded-t-3xl shadow-xl p-5 translate-y-full transition-transform duration-300 ease-out" id="foodSheetInner">
    <div class="w-16 h-1 bg-gray-300 rounded-full mx-auto mb-4"></div>
    <div id="foodSheetContent" class="space-y-4 text-center"></div>
  </div>
</div>




<!-- Categories (auto-select nearest on swipe) -->
<section class="mt-6">
  <h2 class="text-lg font-bold mb-3 px-2">Categories</h2>
  <div id="categoryStrip" class="flex overflow-x-auto space-x-4 px-2 py-1 -mx-2 snap-x snap-mandatory scroll-smooth">
    
    <!-- Category Cards -->
    <div class="category-card flex flex-col items-center min-w-[80px] snap-start cursor-pointer transition-transform duration-200">
      <div class="w-14 h-14 rounded-full bg-red-100 flex items-center justify-center text-2xl shadow-sm">üçî</div>
      <div class="text-sm font-medium mt-2 text-center">Burger</div>
    </div>

    <div class="category-card flex flex-col items-center min-w-[80px] snap-start cursor-pointer transition-transform duration-200">
      <div class="w-14 h-14 rounded-full bg-yellow-100 flex items-center justify-center text-2xl shadow-sm">üçï</div>
      <div class="text-sm font-medium mt-2 text-center">Pizza</div>
    </div>

    <div class="category-card flex flex-col items-center min-w-[80px] snap-start cursor-pointer transition-transform duration-200">
      <div class="w-14 h-14 rounded-full bg-green-100 flex items-center justify-center text-2xl shadow-sm">ü•ó</div>
      <div class="text-sm font-medium mt-2 text-center">Salads</div>
    </div>

    <div class="category-card flex flex-col items-center min-w-[80px] snap-start cursor-pointer transition-transform duration-200">
      <div class="w-14 h-14 rounded-full bg-blue-100 flex items-center justify-center text-2xl shadow-sm">üç£</div>
      <div class="text-sm font-medium mt-2 text-center">Sushi</div>
    </div>

    <div class="category-card flex flex-col items-center min-w-[80px] snap-start cursor-pointer transition-transform duration-200">
      <div class="w-14 h-14 rounded-full bg-pink-100 flex items-center justify-center text-2xl shadow-sm">üåÆ</div>
      <div class="text-sm font-medium mt-2 text-center">Tacos</div>
    </div>

    <div class="category-card flex flex-col items-center min-w-[80px] snap-start cursor-pointer transition-transform duration-200">
      <div class="w-14 h-14 rounded-full bg-indigo-100 flex items-center justify-center text-2xl shadow-sm">üçõ</div>
      <div class="text-sm font-medium mt-2 text-center">Biryani</div>
    </div>

  </div>
</section>

<style>
#categoryStrip::-webkit-scrollbar { display: none; }
#categoryStrip { -ms-overflow-style: none; scrollbar-width: none; }

.category-card.selected {
  transform: scale(1.15);
}
</style>



<script>
/* -----------------------
   Food Express üîç Smart Search Overlay (Zomato/Swiggy style, no recents)
------------------------*/
const searchBox = document.getElementById("searchBox");
const searchOverlay = document.getElementById("searchOverlay");
const searchInput = document.getElementById("searchInput");
const closeSearch = document.getElementById("closeSearch");

// Results container
const resultsContainer = document.getElementById("resultsContainer");
resultsContainer.className = "p-4 space-y-2 overflow-y-auto max-h-[80vh]";

// üç¥ Mock dataset (replace with Firestore later)
const data = [
  { name: "Chicken Biryani", category: "Dish", price: 180, img: "https://source.unsplash.com/80x80/?chicken-biryani" },
  { name: "Paneer Butter Masala", category: "Dish", price: 160, img: "https://source.unsplash.com/80x80/?paneer-butter-masala" },
  { name: "Margherita Pizza", category: "Dish", price: 220, img: "https://source.unsplash.com/80x80/?pizza" },
  { name: "Domino‚Äôs Pizza", category: "Restaurant", price: 250, img: "https://source.unsplash.com/80x80/?dominos" },
  { name: "Starbucks", category: "Restaurant", price: 150, img: "https://source.unsplash.com/80x80/?coffee-shop" },
  { name: "Burger King", category: "Restaurant", price: 180, img: "https://source.unsplash.com/80x80/?burger" },
  { name: "Idli & Dosa Corner", category: "Restaurant", price: 120, img: "https://source.unsplash.com/80x80/?idli-dosa" },
];


// üü† Open overlay
searchBox.addEventListener("focus", openSearchOverlay);
searchBox.addEventListener("click", openSearchOverlay);

function openSearchOverlay() {
  searchOverlay.classList.remove("hidden");
  requestAnimationFrame(() => searchOverlay.classList.remove("translate-y-full"));
  setTimeout(() => searchInput.focus(), 300);
    showTrending(); // show by default
}
searchInput.focus();
  showShimmer(); // show shimmer immediately on open


// üü† Close overlay
closeSearch.addEventListener("click", closeSearchOverlay);
function closeSearchOverlay() {
  searchOverlay.classList.add("translate-y-full");
  setTimeout(() => searchOverlay.classList.add("hidden"), 300);
}

// üü† Handle input typing
let typingTimeout;

searchInput.addEventListener("input", (e) => {
  const term = e.target.value.trim().toLowerCase();
  clearTimeout(typingTimeout);

  if (term === "") {
    resultsContainer.innerHTML = `<p class="text-gray-400 text-sm text-center py-8">Start typing to search...</p>`;
    return;
  }

  // Show shimmer instantly
  showShimmer();

  // Simulate small network delay
  typingTimeout = setTimeout(() => {
    const results = data.filter((item) => item.name.toLowerCase().includes(term));
    renderResults(results, term);
  }, 600);
});


// üü† Render live results (Zomato-style cards)
function renderResults(results, term) {
  fadeOut(resultsContainer, () => {
    if (results.length === 0) {
      resultsContainer.innerHTML = `
        <p class="text-gray-400 text-sm text-center py-8">
          No matches for "${term}"
        </p>`;
      return;
    }

    resultsContainer.innerHTML = `
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 px-3 py-4">
        ${results
          .map(
            (r) => `
            <div 
              class="flex items-center gap-3 bg-white p-3 rounded-xl shadow-sm border border-gray-100 hover:border-orange-300 hover:shadow-md transition cursor-pointer"
              onclick="selectResult('${r.name}')"
            >
              <img src="${r.img}" alt="${r.name}" 
                class="w-16 h-16 rounded-xl object-cover" />
              <div class="flex-1">
                <p class="font-medium text-gray-800">${r.name}</p>
                <p class="text-xs text-gray-500">${r.category}</p>
                <p class="text-orange-500 text-sm font-semibold mt-1">‚Çπ${r.price}</p>
              </div>
              <button 
                class="bg-orange-500 text-white px-3 py-1 rounded-full text-xs font-medium hover:bg-orange-600 transition"
                onclick='openFoodSheet(${JSON.stringify(r)})'>
                 Add
              </button>

            </div>
          `
          )
          .join("")}
      </div>`;
  });
}


// =========================
// üç≤ Swiggy/Zomato Bottom Sheet Preview
// =========================
const foodSheet = document.getElementById("foodSheet");
const foodSheetInner = document.getElementById("foodSheetInner");
const foodSheetContent = document.getElementById("foodSheetContent");
let activeItem = null;

window.selectResult = (term) => {
  const item = data.find((d) => d.name === term);
  if (!item) return;
  openFoodSheet(item);
};

// üü† Open food bottom sheet
function openFoodSheet(item) {
  activeItem = item;
  const fixedPrice = item.price;
  const rating = (Math.random() * 1.2 + 3.8).toFixed(1);
  const reviews = Math.floor(Math.random() * 600 + 100);

  foodSheetContent.innerHTML = `
    <img src="${item.img}" alt="${item.name}" class="w-28 h-28 mx-auto rounded-2xl object-cover shadow-md" />
    <div>
      <h3 class="text-xl font-semibold text-gray-800">${item.name}</h3>
      <p class="text-sm text-gray-500">${item.category}</p>
      <div class="flex items-center justify-center gap-2 mt-1">
        <span class="text-yellow-500">‚≠ê</span>
        <span class="text-gray-700 font-medium">${rating}</span>
        <span class="text-gray-400 text-sm">(${reviews})</span>
      </div>
        <p class="text-orange-500 font-bold text-lg mt-1">‚Çπ${fixedPrice}</p>
    </div>

    <div class="flex items-center justify-center gap-4 mt-4">
      <button id="decQty" class="w-9 h-9 bg-gray-100 rounded-full flex items-center justify-center text-xl font-bold text-gray-700">‚àí</button>
      <span id="foodQty" class="text-lg font-semibold text-gray-700">1</span>
      <button id="incQty" class="w-9 h-9 bg-orange-500 text-white rounded-full flex items-center justify-center text-xl font-bold hover:bg-orange-600">+</button>
    </div>

    <button id="addToCart" class="mt-5 w-full bg-orange-500 text-white font-semibold py-3 rounded-full shadow-md hover:bg-orange-600 transition">Add to Cart</button>
    <button id="viewDetails" class="mt-2 w-full text-orange-500 font-medium hover:text-orange-600">View Details ‚ûú</button>
  `;

  foodSheet.classList.remove("hidden");
  requestAnimationFrame(() => foodSheetInner.classList.remove("translate-y-full"));

  // Quantity logic
  let qty = 1;
  const qtyDisplay = document.getElementById("foodQty");
  document.getElementById("incQty").onclick = () => (qtyDisplay.textContent = ++qty);
  document.getElementById("decQty").onclick = () => {
    if (qty > 1) qtyDisplay.textContent = --qty;
  };

// ‚úÖ Add to cart with animation + global cart update
document.getElementById("addToCart").onclick = () => {
  const price = item.price; // use fixed price
  flyToCart(foodSheetContent.querySelector("img"));
  for (let i = 0; i < qty; i++) {
    handleAddToCart(
      document.getElementById("addToCart"),
      item.name,
      price,
      item.img
    );
  }
  showToast(`${qty} √ó ${item.name} added to cart üõí`);
  closeFoodSheet(); // optional: auto-close after adding
};



  // View details
  document.getElementById("viewDetails").onclick = () => {
    closeFoodSheet();
    closeSearchOverlay();
    window.location.href = `/food.html?item=${encodeURIComponent(item.name)}`;
  };
}

// üü† Close food sheet
foodSheet.addEventListener("click", (e) => {
  if (e.target === foodSheet) closeFoodSheet();
});
function closeFoodSheet() {
  foodSheetInner.classList.add("translate-y-full");
  setTimeout(() => foodSheet.classList.add("hidden"), 300);
}

// üü† Toast
function showToast(msg) {
  const toast = document.createElement("div");
  toast.textContent = msg;
  toast.className =
    "fixed bottom-6 left-1/2 -translate-x-1/2 bg-orange-500 text-white text-sm px-4 py-2 rounded-full shadow-lg opacity-0 transition-opacity z-[70]";
  document.body.appendChild(toast);
  requestAnimationFrame(() => (toast.style.opacity = "1"));
  setTimeout(() => {
    toast.style.opacity = "0";
    setTimeout(() => toast.remove(), 500);
  }, 1800);
}

// üü† Fly-to-cart animation
function flyToCart(imgSrc) {
  const cartIcon = document.querySelector("#cartIcon");
  if (!cartIcon) return;
  const img = document.createElement("img");
  img.src = imgSrc;
  img.className = "fly-img";
  document.body.appendChild(img);

  const { left, top } = cartIcon.getBoundingClientRect();
  img.style.cssText = `
    position: fixed; width: 80px; height: 80px; border-radius: 50%;
    object-fit: cover; top: ${window.innerHeight - 200}px; left: 50%;
    transform: translateX(-50%); z-index: 999;
    transition: all 0.8s cubic-bezier(.25,.8,.25,1);
  `;
  requestAnimationFrame(() => {
    img.style.top = `${top + window.scrollY}px`;
    img.style.left = `${left}px`;
    img.style.width = "20px";
    img.style.height = "20px";
    img.style.opacity = "0.2";
  });
  setTimeout(() => img.remove(), 900);
  cartIcon.classList.add("animate-bump");
  setTimeout(() => cartIcon.classList.remove("animate-bump"), 300);
}

// üü† Zomato-style food card shimmer
function showShimmer() {
  resultsContainer.innerHTML = `
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 px-3 py-4 shimmer-wrapper opacity-100 transition-opacity duration-300">
      ${Array(6)
        .fill(0)
        .map(
          () => `
          <div class="flex items-center gap-3 bg-white p-3 rounded-xl shadow-sm border border-gray-100">
            <div class="w-16 h-16 rounded-xl shimmer-box"></div>
            <div class="flex-1 space-y-2">
              <div class="h-3 w-3/4 rounded shimmer-box"></div>
              <div class="h-3 w-1/2 rounded shimmer-box"></div>
              <div class="h-3 w-1/3 rounded shimmer-box"></div>
            </div>
          </div>
        `
        )
        .join("")}
    </div>
  `;
}



// üü† Handle input typing with shimmer + fade transition
searchInput.addEventListener("input", (e) => {
  const term = e.target.value.trim().toLowerCase();

   if (term === "") {
    showTrending(); // show ‚ÄúTrending Near You‚Äù
    return;
  }

  // Show shimmer first
  showShimmer();

  // Simulate loading delay for visual effect
  setTimeout(() => {
    const results = data.filter((item) => item.name.toLowerCase().includes(term));
    fadeOut(resultsContainer, () => renderResults(results, term)); // fade out shimmer ‚Üí show results
  }, 600);
});

// üü† Smooth fade-out before showing results
function fadeOut(element, callback) {
  element.style.opacity = "1";
  element.style.transition = "opacity 0.25s ease";
  element.style.opacity = "0";

  setTimeout(() => {
    callback();
    fadeIn(element);
  }, 250);
}

// üü† Smooth fade-in for new results
function fadeIn(element) {
  element.style.opacity = "0";
  requestAnimationFrame(() => {
    element.style.transition = "opacity 0.3s ease";
    element.style.opacity = "1";
  });
}


</script>

<div id="restaurantList"></div>







  
<!-- Toast -->
<div id="toast"
     class="fixed bottom-5 left-1/2 -translate-x-1/2 bg-black text-white px-4 py-2 rounded-lg text-sm shadow-lg opacity-0 pointer-events-none transition-all duration-300">
</div>


<!-- Dim Background Overlay -->
<div id="overlay"
     class="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm opacity-0 pointer-events-none 
            transition-all duration-300 z-40">
</div>



</body>
</html>
